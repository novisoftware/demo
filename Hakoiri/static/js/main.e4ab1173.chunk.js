(this["webpackJsonphakoniwa-react-app"]=this["webpackJsonphakoniwa-react-app"]||[]).push([[0],{11:function(i,e,t){"use strict";t.r(e);var o=t(1),h=t.n(o),a=t(5),n=t.n(a),s=t(2),l=t(0);var d=i=>{let{position:e,size:t,label:o,isActive:h,onDragStart:a,onClick:n,onTouchStart:s,onTouchMove:d,onTouchEnd:c}=i,r=!1,p="1rem";return 1===t.width&&1===t.height?1==o.length?(p="1.5rem",r=!1):(p="1.2rem",r=!0):t.height==t.width?p="5rem":t.height>t.width?(p="2em",r=!0):(p="2rem",r=!1),Object(l.jsx)("div",{className:"puzzle-piece ".concat(h?"active":""),style:{gridColumn:"".concat(e.x," / span ").concat(t.width),gridRow:"".concat(e.y," / span ").concat(t.height),display:"flex",justifyContent:"center",alignItems:"center",writingMode:r?"vertical-rl":"horizontal-tb",border:"1.5px solid black",backgroundColor:"#f0f0f0",color:"#000",fontSize:p,cursor:"grab",width:"100%",height:"100%"},draggable:"true",onDragStart:a,onClick:n,onTouchStart:s,onTouchMove:d,onTouchEnd:c,children:o})};var c=i=>{let{boardDef:e}=i;Object(o.useEffect)(()=>{const i=document.querySelector(".board");return i&&i.addEventListener("touchmove",i=>i.preventDefault(),{passive:!1}),()=>{i&&i.removeEventListener("touchmove",i=>i.preventDefault())}},[]);const[t,h]=Object(o.useState)(e.pieceData);Object(o.useEffect)(()=>{h(e.pieceData)},[e]);const[a,n]=Object(o.useState)(null),[c,r]=Object(o.useState)(null),[p,g]=Object(o.useState)(null),[b,x]=Object(o.useState)(null),u=i=>{if(i.preventDefault(),!c||!b)return;const t=i.touches[0],o=t.clientX-b.x,h=t.clientY-b.y,a=Math.floor(c.position.x+o/(600/e.width)),s=Math.floor(c.position.y+h/(500/e.height)),l=Math.min(Math.max(a,1),e.width-c.size.width+1),d=Math.min(Math.max(s,1),e.height-c.size.height+1);n({x:l,y:d})},w=i=>{if(i.preventDefault(),!c||!a)return;t.some(i=>i.id!==c.id&&a.x<i.position.x+i.size.width&&a.x+c.size.width>i.position.x&&a.y<i.position.y+i.size.height&&a.y+c.size.height>i.position.y)||h(i=>i.map(i=>i.id===c.id?Object(s.a)(Object(s.a)({},c),{},{position:{x:a.x,y:a.y}}):i)),r(null),x(null)},y="".concat(100*e.width+10,"px"),z="".concat(100*e.height+40,"px"),j="".concat(100*e.width,"px"),f="".concat(100*e.height,"px"),v="repeat(".concat(e.width,", 1fr)"),m="repeat(".concat(e.height,", 1fr)");return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("button",{style:{margin:"8px 0",zIndex:2},onClick:()=>{h(e.pieceData),n(null),r(null),g(null),x(null)},children:"\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3059"}),Object(l.jsxs)("div",{style:{position:"relative",width:"".concat(y),height:"".concat(z),border:"10px solid black",backgroundColor:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(l.jsxs)("div",{className:"board",style:{display:"grid",gridTemplateColumns:"".concat(v),gridTemplateRows:"".concat(m),width:"".concat(j),height:"".concat(f),position:"relative",backgroundColor:"#fff0",margin:"5px"},onDrop:i=>{i.preventDefault();const o=JSON.parse(i.dataTransfer.getData("text/plain")),l=(null===a||void 0===a?void 0:a.x)||1,d=(null===a||void 0===a?void 0:a.y)||1,c=t.some(i=>i.id!==o.id&&l<i.position.x+i.size.width&&l+o.size.width>i.position.x&&d<i.position.y+i.size.height&&d+o.size.height>i.position.y),p=l<1||d<1||l+o.size.width>e.width+1||d+o.size.height>e.height+1;c||p?console.log("\u91cd\u306a\u308a\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u30c9\u30e9\u30c3\u30b0\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u307e\u3059\u3002"):h(i=>i.map(i=>i.id===o.id?Object(s.a)(Object(s.a)({},i),{},{position:{x:l,y:d}}):i)),n(null),r(null)},onDragOver:i=>{if(i.preventDefault(),!c)return;if(!p)return;const t=i.clientX,o=i.clientY,h=t-p.x,a=o-p.y,s=i.currentTarget.getBoundingClientRect();let l=Math.floor(h/(1*s.width/e.width)+.5)+c.position.x,d=Math.floor(a/(1*s.height/e.height)+.5)+c.position.y;l=Math.max(l,1),d=Math.max(d,1),l=Math.min(Math.max(l,1),e.width-c.size.width+1),d=Math.min(Math.max(d,1),e.height-c.size.height+1),n({x:l,y:d})},children:[t.map((i,e)=>Object(l.jsx)(d,{label:i.label,size:i.size,position:i.position,isActive:!1,onClick:()=>console.log("".concat(i.label," clicked")),onDragStart:e=>{e.dataTransfer.setData("text/plain",JSON.stringify(i)),r(i);const t=e.clientX,o=e.clientY;console.log("Drag started at X: ".concat(t,", Y: ").concat(o)),g({x:t,y:o})},onTouchStart:e=>((i,e)=>{i.preventDefault();const t=i.touches[0];r(e),x({x:t.clientX,y:t.clientY})})(e,i),onTouchMove:u,onTouchEnd:w},e)),a&&c&&Object(l.jsx)("div",{style:{gridColumn:"".concat(a.x," / span ").concat(c.size.width),gridRow:"".concat(a.y," / span ").concat(c.size.height),backgroundColor:"rgba(128, 128, 255, 0.1)",border:"1px solid rgba(128, 128, 255, 0.5)",borderRadius:"7px",position:"absolute",width:"100%",height:"100%"}})]}),Object(l.jsx)("div",{style:{position:"absolute",bottom:"-10px",left:"50%",transform:"translateX(-50%)",width:"200px",height:"10px",backgroundColor:"#fff"}})]})]})};var r={width:6,height:5,pieceData:[{id:1,label:"\u7236",size:{width:1,height:2},position:{x:3,y:1}},{id:2,label:"\u5a18",size:{width:2,height:2},position:{x:4,y:1}},{id:3,label:"\u6bcd",size:{width:1,height:2},position:{x:6,y:1}},{id:4,label:"\u4e01\u7a1a",size:{width:1,height:1},position:{x:1,y:3}},{id:5,label:"\u624b\u4ee3",size:{width:1,height:1},position:{x:2,y:3}},{id:6,label:"\u5927\u756a\u982d",size:{width:4,height:1},position:{x:3,y:3}},{id:7,label:"\u4e01\u7a1a",size:{width:1,height:1},position:{x:1,y:4}},{id:8,label:"\u756a\u982d",size:{width:2,height:1},position:{x:2,y:4}},{id:9,label:"\u5973\u4e2d",size:{width:2,height:1},position:{x:4,y:4}},{id:10,label:"\u5144\u5ac1",size:{width:1,height:1},position:{x:6,y:4}},{id:11,label:"\u756a\u72ac",size:{width:1,height:1},position:{x:1,y:5}},{id:12,label:"\u7956\u7236",size:{width:2,height:1},position:{x:2,y:5}},{id:13,label:"\u7956\u6bcd",size:{width:2,height:1},position:{x:4,y:5}},{id:14,label:"\u4e01\u7a1a",size:{width:1,height:1},position:{x:6,y:5}}]};var p={width:4,height:5,pieceData:[{id:1,label:"\u7236\u89aa",size:{width:1,height:2},position:{x:1,y:1}},{id:2,label:"\u5a18",size:{width:2,height:2},position:{x:2,y:1}},{id:3,label:"\u6bcd\u89aa",size:{width:1,height:2},position:{x:4,y:1}},{id:4,label:"\u7956\u7236",size:{width:1,height:2},position:{x:1,y:3}},{id:5,label:"\u5144\u5f1f",size:{width:2,height:1},position:{x:2,y:3}},{id:6,label:"\u7956\u6bcd",size:{width:1,height:2},position:{x:4,y:3}},{id:7,label:"\u83ef\u9053",size:{width:1,height:1},position:{x:2,y:4}},{id:8,label:"\u8336\u9053",size:{width:1,height:1},position:{x:3,y:4}},{id:9,label:"\u548c\u88c1",size:{width:1,height:1},position:{x:1,y:5}},{id:10,label:"\u66f8\u9053",size:{width:1,height:1},position:{x:4,y:5}}]};var g={width:4,height:5,pieceData:[{id:1,label:"\u89d2\u884c",size:{width:1,height:2},position:{x:1,y:1}},{id:2,label:"\u738b",size:{width:2,height:2},position:{x:2,y:1}},{id:3,label:"\u98db\u8eca",size:{width:1,height:2},position:{x:4,y:1}},{id:4,label:"\u9999\u8eca",size:{width:1,height:1},position:{x:1,y:3}},{id:5,label:"\u6842\u99ac",size:{width:1,height:1},position:{x:2,y:3}},{id:6,label:"\u6842\u99ac",size:{width:1,height:1},position:{x:3,y:3}},{id:7,label:"\u9999\u8eca",size:{width:1,height:1},position:{x:4,y:3}},{id:8,label:"\u91d1",size:{width:2,height:1},position:{x:1,y:4}},{id:9,label:"\u9280",size:{width:2,height:1},position:{x:3,y:4}},{id:10,label:"\u6b69\u5175",size:{width:1,height:1},position:{x:1,y:5}},{id:11,label:"\u6b69\u5175",size:{width:1,height:1},position:{x:4,y:5}}]};var b={width:4,height:5,pieceData:[{id:1,label:"\u9ec4\u5fe0",size:{width:1,height:2},position:{x:1,y:1}},{id:2,label:"\u66f9\u64cd",size:{width:2,height:2},position:{x:2,y:1}},{id:3,label:"\u5f35\u98db",size:{width:1,height:2},position:{x:4,y:1}},{id:4,label:"\u5175",size:{width:1,height:1},position:{x:1,y:3}},{id:5,label:"\u99ac\u8d85",size:{width:1,height:2},position:{x:1,y:4}},{id:6,label:"\u95a2\u7fbd",size:{width:2,height:1},position:{x:2,y:3}},{id:7,label:"\u8d99\u96f2",size:{width:1,height:2},position:{x:4,y:3}},{id:8,label:"\u5175",size:{width:1,height:1},position:{x:4,y:5}},{id:9,label:"\u5175",size:{width:1,height:1},position:{x:2,y:4}},{id:10,label:"\u5175",size:{width:1,height:1},position:{x:3,y:4}}]};var x=i=>{let{header:e,message:t}=i;return Object(l.jsxs)("header",{children:[Object(l.jsx)("h1",{children:e}),Object(l.jsxs)("p",{children:[t,"\u8a73\u3057\u304f\u306fWikipedia\u306e",Object(l.jsx)("a",{href:"https://ja.wikipedia.org/wiki/%E7%AE%B1%E5%85%A5%E3%82%8A%E5%A8%98_(%E3%83%91%E3%82%BA%E3%83%AB)",children:"\u7bb1\u5165\u308a\u5a18"}),"\u3092\u898b\u3088\u3046\u3002"]})]})};t(4);const u=[{label:"\u7bb1\u5165\u308a\u5a18(\u5927\u5bb6\u65cf)",value:"big",definition:r,header:"\u7bb1\u5165\u308a\u5a18(\u5927\u5bb6\u65cf)",message:"\u5927\u5bb6\u65cf\u306e\u7bb1\u5165\u308a\u5a18\u3092\u5916\u306b\u51fa\u305d\u3046\u3002"},{label:"\u7bb1\u5165\u308a\u5a18",value:"hakoiri",definition:p,header:"\u7bb1\u5165\u308a\u5a18",message:"\u7bb1\u5165\u308a\u5a18\u3092\u5916\u306b\u51fa\u305d\u3046\u3002"},{label:"\u5c06\u68cb\u30d1\u30ba\u30eb",value:"shogi",definition:g,header:"\u5c06\u68cb\u30d1\u30ba\u30eb",message:"\u738b\u3092\u51fa\u9663\u3055\u305b\u3088\u3046\u3002"},{label:"\u83ef\u5bb9\u9053",value:"kayou",definition:b,header:"\u83ef\u5bb9\u9053",message:"\u83ef\u5bb9\u9053\u3092\u89e3\u3053\u3046\u3002"}];var w=()=>{const[i,e]=Object(o.useState)("hakoiri"),t=u.find(e=>e.value===i)||u[2];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(x,{header:t.header,message:t.message}),Object(l.jsx)("div",{style:{margin:"16px 0"},children:Object(l.jsxs)("label",{children:["\u30d1\u30ba\u30eb\u3092\u9078\u629e\uff1a",Object(l.jsx)("select",{value:i,onChange:i=>e(i.target.value),children:u.map(i=>Object(l.jsx)("option",{value:i.value,children:i.label},i.value))})]})}),Object(l.jsx)(c,{boardDef:t.definition})]})};n.a.render(Object(l.jsx)(h.a.StrictMode,{children:Object(l.jsx)(w,{})}),document.getElementById("root"))},4:function(i,e,t){}},[[11,1,2]]]);
//# sourceMappingURL=main.e4ab1173.chunk.js.map