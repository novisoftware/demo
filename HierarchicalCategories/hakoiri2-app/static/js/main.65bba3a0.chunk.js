(this["webpackJsonphakoniwa-react-app"]=this["webpackJsonphakoniwa-react-app"]||[]).push([[0],{11:function(i,t,e){"use strict";e.r(t);var o=e(1),n=e.n(o),a=e(5),s=e.n(a),h=e(2),l=e(0);var r=i=>{let{position:t,size:e,label:o,isActive:n,onDragStart:a,onClick:s,onTouchStart:h,onTouchMove:r,onTouchEnd:c}=i,d=!1,p="1rem";return 1===e.width&&1===e.height?1==o.length?(p="1.5rem",d=!1):(p="1.2rem",d=!0):e.height==e.width?p="5rem":e.height>e.width?(p="2em",d=!0):(p="2rem",d=!1),Object(l.jsx)("div",{className:"puzzle-piece ".concat(n?"active":""),style:{gridColumn:"".concat(t.x," / span ").concat(e.width),gridRow:"".concat(t.y," / span ").concat(e.height),display:"flex",justifyContent:"center",alignItems:"center",writingMode:d?"vertical-rl":"horizontal-tb",border:"1.5px solid black",backgroundColor:"#f0f0f0",color:"#000",fontSize:p,cursor:"grab",width:"100%",height:"100%"},draggable:"true",onDragStart:a,onClick:s,onTouchStart:h,onTouchMove:r,onTouchEnd:c,children:o})};const c=[{id:1,label:"\u7236",size:{width:1,height:2},position:{x:3,y:1}},{id:2,label:"\u5a18",size:{width:2,height:2},position:{x:4,y:1}},{id:3,label:"\u6bcd",size:{width:1,height:2},position:{x:6,y:1}},{id:4,label:"\u4e01\u7a1a",size:{width:1,height:1},position:{x:1,y:3}},{id:5,label:"\u624b\u4ee3",size:{width:1,height:1},position:{x:2,y:3}},{id:6,label:"\u5927\u756a\u982d",size:{width:4,height:1},position:{x:3,y:3}},{id:7,label:"\u4e01\u7a1a",size:{width:1,height:1},position:{x:1,y:4}},{id:8,label:"\u756a\u982d",size:{width:2,height:1},position:{x:2,y:4}},{id:9,label:"\u5973\u4e2d",size:{width:2,height:1},position:{x:4,y:4}},{id:10,label:"\u5144\u5ac1",size:{width:1,height:1},position:{x:6,y:4}},{id:11,label:"\u756a\u72ac",size:{width:1,height:1},position:{x:1,y:5}},{id:12,label:"\u7956\u7236",size:{width:2,height:1},position:{x:2,y:5}},{id:13,label:"\u7956\u6bcd",size:{width:2,height:1},position:{x:4,y:5}},{id:14,label:"\u4e01\u7a1a",size:{width:1,height:1},position:{x:6,y:5}}];var d=()=>{const[i,t]=Object(o.useState)(c),[e,n]=Object(o.useState)(null),[a,s]=Object(o.useState)(null),[d,p]=Object(o.useState)(null),[x,g]=Object(o.useState)(null),b=i=>{if(i.preventDefault(),!a||!x)return;const t=i.touches[0],e=t.clientX-x.x,o=t.clientY-x.y,s=Math.floor(a.position.x+e/100),h=Math.floor(a.position.y+o/100),l=Math.min(Math.max(s,1),6-a.size.width+1),r=Math.min(Math.max(h,1),5-a.size.height+1);n({x:l,y:r})},u=o=>{if(o.preventDefault(),!a||!e)return;i.some(i=>i.id!==a.id&&e.x<i.position.x+i.size.width&&e.x+a.size.width>i.position.x&&e.y<i.position.y+i.size.height&&e.y+a.size.height>i.position.y)||t(i=>i.map(i=>i.id===a.id?Object(h.a)(Object(h.a)({},a),{},{position:{x:e.x,y:e.y}}):i)),s(null),g(null)};return Object(l.jsxs)("div",{style:{position:"relative",width:"610px",height:"540px",border:"10px solid black",backgroundColor:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(l.jsxs)("div",{className:"board",style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gridTemplateRows:"repeat(5, 1fr)",width:"600px",height:"500px",position:"relative",backgroundColor:"#fff0",margin:"5px"},onDrop:o=>{o.preventDefault();const a=JSON.parse(o.dataTransfer.getData("text/plain")),l=(null===e||void 0===e?void 0:e.x)||1,r=(null===e||void 0===e?void 0:e.y)||1,c=i.some(i=>i.id!==a.id&&l<i.position.x+i.size.width&&l+a.size.width>i.position.x&&r<i.position.y+i.size.height&&r+a.size.height>i.position.y),d=l<1||r<1||l+a.size.width>7||r+a.size.height>6;c||d?console.log("\u91cd\u306a\u308a\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u30c9\u30e9\u30c3\u30b0\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u307e\u3059\u3002"):t(i=>i.map(i=>i.id===a.id?Object(h.a)(Object(h.a)({},i),{},{position:{x:l,y:r}}):i)),n(null),s(null)},onDragOver:i=>{if(i.preventDefault(),!a)return;if(!d)return;const t=i.clientX,e=i.clientY,o=t-d.x,s=e-d.y,h=i.currentTarget.getBoundingClientRect();let l=Math.floor(o/(1*h.width/6)+.5)+a.position.x,r=Math.floor(s/(1*h.height/5)+.5)+a.position.y;l=Math.max(l,1),r=Math.max(r,1),l=Math.min(Math.max(l,1),6-a.size.width+1),r=Math.min(Math.max(r,1),5-a.size.height+1),n({x:l,y:r})},children:[i.map((i,t)=>Object(l.jsx)(r,{label:i.label,size:i.size,position:i.position,isActive:!1,onClick:()=>console.log("".concat(i.label," clicked")),onDragStart:t=>{t.dataTransfer.setData("text/plain",JSON.stringify(i)),s(i);const e=t.clientX,o=t.clientY;console.log("Drag started at X: ".concat(e,", Y: ").concat(o)),p({x:e,y:o})},onTouchStart:t=>((i,t)=>{i.preventDefault();const e=i.touches[0];s(t),g({x:e.clientX,y:e.clientY})})(t,i),onTouchMove:b,onTouchEnd:u},t)),e&&a&&Object(l.jsx)("div",{style:{gridColumn:"".concat(e.x," / span ").concat(a.size.width),gridRow:"".concat(e.y," / span ").concat(a.size.height),backgroundColor:"rgba(128, 128, 255, 0.1)",border:"1px solid rgba(128, 128, 255, 0.5)",borderRadius:"7px",position:"absolute",width:"100%",height:"100%"}})]}),Object(l.jsx)("div",{style:{position:"absolute",bottom:"-10px",left:"50%",transform:"translateX(-50%)",width:"200px",height:"10px",backgroundColor:"#fff"}})]})};var p=()=>Object(l.jsxs)("header",{children:[Object(l.jsx)("h1",{children:"\u7bb1\u5165\u308a\u5a18"}),Object(l.jsxs)("p",{children:["\u7bb1\u5165\u308a\u5a18\u3092\u5916\u306b\u51fa\u305d\u3046\u3002\u8a73\u3057\u304f\u306fWikipedia\u306e",Object(l.jsx)("a",{href:"https://ja.wikipedia.org/wiki/%E7%AE%B1%E5%85%A5%E3%82%8A%E5%A8%98_(%E3%83%91%E3%82%BA%E3%83%AB)",children:"\u7bb1\u5165\u308a\u5a18"}),"\u3092\u898b\u3088\u3046\u3002"]})]});e(4);var x=()=>Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(p,{}),Object(l.jsx)(d,{})]});s.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root"))},4:function(i,t,e){}},[[11,1,2]]]);
//# sourceMappingURL=main.65bba3a0.chunk.js.map