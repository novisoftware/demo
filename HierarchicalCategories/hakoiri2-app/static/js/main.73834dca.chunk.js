(this["webpackJsonphakoniwa-react-app"]=this["webpackJsonphakoniwa-react-app"]||[]).push([[0],{11:function(t,i,e){"use strict";e.r(i);var o=e(1),n=e.n(o),a=e(5),s=e.n(a),l=e(2),h=e(0);var c=t=>{let{position:i,size:e,label:o,isActive:n,onDragStart:a,onClick:s,onTouchStart:l,onTouchMove:c,onTouchEnd:r}=t,d=!1,p="1rem";return 1===e.width&&1===e.height?1==o.length?(p="1.5rem",d=!1):(p="1.2rem",d=!0):e.height==e.width?p="5rem":e.height>e.width?(p="2em",d=!0):(p="2rem",d=!1),Object(h.jsx)("div",{className:"puzzle-piece ".concat(n?"active":""),style:{gridColumn:"".concat(i.x," / span ").concat(e.width),gridRow:"".concat(i.y," / span ").concat(e.height),display:"flex",justifyContent:"center",alignItems:"center",writingMode:d?"vertical-rl":"horizontal-tb",border:"1.5px solid black",backgroundColor:"#f0f0f0",color:"#000",fontSize:p,cursor:"grab",width:"100%",height:"100%"},draggable:"true",onDragStart:a,onClick:s,onTouchStart:l,onTouchMove:c,onTouchEnd:r,children:o})};const r=[{id:1,label:"\u7236",size:{width:1,height:2},position:{x:3,y:1}},{id:2,label:"\u5a18",size:{width:2,height:2},position:{x:4,y:1}},{id:3,label:"\u6bcd",size:{width:1,height:2},position:{x:6,y:1}},{id:4,label:"\u4e01\u7a1a",size:{width:1,height:1},position:{x:1,y:3}},{id:5,label:"\u624b\u4ee3",size:{width:1,height:1},position:{x:2,y:3}},{id:6,label:"\u5927\u756a\u982d",size:{width:4,height:1},position:{x:3,y:3}},{id:7,label:"\u4e01\u7a1a",size:{width:1,height:1},position:{x:1,y:4}},{id:8,label:"\u756a\u982d",size:{width:2,height:1},position:{x:2,y:4}},{id:9,label:"\u5973\u4e2d",size:{width:2,height:1},position:{x:4,y:4}},{id:10,label:"\u5144\u5ac1",size:{width:1,height:1},position:{x:6,y:4}},{id:11,label:"\u756a\u72ac",size:{width:1,height:1},position:{x:1,y:5}},{id:12,label:"\u7956\u7236",size:{width:2,height:1},position:{x:2,y:5}},{id:13,label:"\u7956\u6bcd",size:{width:2,height:1},position:{x:4,y:5}},{id:14,label:"\u4e01\u7a1a",size:{width:1,height:1},position:{x:6,y:5}}];var d=()=>{const[t,i]=Object(o.useState)(r),[e,n]=Object(o.useState)(null),[a,s]=Object(o.useState)(null),[d,p]=Object(o.useState)(null),[g,x]=Object(o.useState)(null),b=t=>{if(t.preventDefault(),!a||!g)return;const i=t.touches[0],e=i.clientX-g.x,o=i.clientY-g.y,n=Math.floor(a.position.x+e/100),h=Math.floor(a.position.y+o/100),c=Math.min(Math.max(n,1),6-a.size.width+1),r=Math.min(Math.max(h,1),5-a.size.height+1);s(Object(l.a)(Object(l.a)({},a),{},{position:{x:c,y:r}}))},u=()=>{a&&i(t=>t.map(t=>t.id===a.id?a:t)),s(null),x(null)};return Object(h.jsxs)("div",{style:{position:"relative",width:"610px",height:"540px",border:"10px solid black",backgroundColor:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(h.jsxs)("div",{className:"board",style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gridTemplateRows:"repeat(5, 1fr)",width:"600px",height:"500px",position:"relative",backgroundColor:"#fff0",margin:"5px"},onDrop:o=>{o.preventDefault();const a=JSON.parse(o.dataTransfer.getData("text/plain")),h=(null===e||void 0===e?void 0:e.x)||1,c=(null===e||void 0===e?void 0:e.y)||1,r=t.some(t=>t.id!==a.id&&h<t.position.x+t.size.width&&h+a.size.width>t.position.x&&c<t.position.y+t.size.height&&c+a.size.height>t.position.y),d=h<1||c<1||h+a.size.width>7||c+a.size.height>6;r||d?console.log("\u91cd\u306a\u308a\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u30c9\u30e9\u30c3\u30b0\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u307e\u3059\u3002"):i(t=>t.map(t=>t.id===a.id?Object(l.a)(Object(l.a)({},t),{},{position:{x:h,y:c}}):t)),n(null),s(null)},onDragOver:t=>{if(t.preventDefault(),!a)return;if(!d)return;const i=t.clientX,e=t.clientY,o=i-d.x,s=e-d.y,l=t.currentTarget.getBoundingClientRect();let h=Math.floor(o/(1*l.width/6)+.5)+a.position.x,c=Math.floor(s/(1*l.height/5)+.5)+a.position.y;h=Math.max(h,1),c=Math.max(c,1),h=Math.min(Math.max(h,1),6-a.size.width+1),c=Math.min(Math.max(c,1),5-a.size.height+1),n({x:h,y:c})},children:[t.map((t,i)=>Object(h.jsx)(c,{label:t.label,size:t.size,position:t.position,isActive:!1,onClick:()=>console.log("".concat(t.label," clicked")),onDragStart:i=>{i.dataTransfer.setData("text/plain",JSON.stringify(t)),s(t);const e=i.clientX,o=i.clientY;console.log("Drag started at X: ".concat(e,", Y: ").concat(o)),p({x:e,y:o})},onTouchStart:i=>((t,i)=>{const e=t.touches[0];s(i),x({x:e.clientX,y:e.clientY})})(i,t),onTouchMove:b,onTouchEnd:u},i)),e&&a&&Object(h.jsx)("div",{style:{gridColumn:"".concat(e.x," / span ").concat(a.size.width),gridRow:"".concat(e.y," / span ").concat(a.size.height),backgroundColor:"rgba(128, 128, 255, 0.1)",border:"1px solid rgba(128, 128, 255, 0.5)",borderRadius:"7px",position:"absolute",width:"100%",height:"100%"}})]}),Object(h.jsx)("div",{style:{position:"absolute",bottom:"-10px",left:"50%",transform:"translateX(-50%)",width:"200px",height:"10px",backgroundColor:"#fff"}})]})};var p=()=>Object(h.jsxs)("header",{children:[Object(h.jsx)("h1",{children:"\u7bb1\u5165\u308a\u5a18"}),Object(h.jsxs)("p",{children:["\u7bb1\u5165\u308a\u5a18\u3092\u5916\u306b\u51fa\u305d\u3046\u3002\u8a73\u3057\u304f\u306fWikipedia\u306e",Object(h.jsx)("a",{href:"https://ja.wikipedia.org/wiki/%E7%AE%B1%E5%85%A5%E3%82%8A%E5%A8%98_(%E3%83%91%E3%82%BA%E3%83%AB)",children:"\u7bb1\u5165\u308a\u5a18"}),"\u3092\u898b\u3088\u3046\u3002"]})]});e(4);var g=()=>Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(p,{}),Object(h.jsx)(d,{})]});s.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root"))},4:function(t,i,e){}},[[11,1,2]]]);
//# sourceMappingURL=main.73834dca.chunk.js.map